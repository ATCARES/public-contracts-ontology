<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.1//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"> 
<html xml:lang="cs" lang="cs"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:foaf="http://xmlns.com/foaf/0.1/"
      prefix="foaf: http://xmlns.com/foaf/0.1/"
      version="XHTML+RDFa 1.1"
      about="" typeof="foaf:Document"> 
<head>
  <meta charset="utf-8" />
  <title>Recept pro vyznačení veřejné zakázky v RDFa</title>
  <style type="text/css">
    pre strong {
      color: red;
    }
    body { padding-right: 1em; padding-left: 70px; background: white fixed no-repeat left top; padding-bottom: 2em; margin: 0px; color: black; line-height: 1.5em; padding-top: 2em; font-family: sans-serif; }
    :link { background: transparent; color: #00c; }
    :visited { background: transparent; color: #609; }
    a:active { background: transparent; color: #c00; }
    a:link img, a:visited img { border: none; }
    th { font-family: sans-serif; }
    td { font-family: sans-serif; }
    h1, h2, h3, dt { background: white; color: #064; text-align: left; }
    h1 { font: 170% sans-serif; }
    h2 { font: 140% sans-serif; margin-top: 1.4em; }
    h3 { font: 120% sans-serif; }
    .hide { display: none; }
    div.head { margin-bottom: 1em; }
    div.head h1 { clear: both; margin-top: 2em; }
    dl.frontmatter dt { font-weight: bold; color: black; }
    dt { font-weight: normal; font-size: 100%; }
    dd { margin-top: 0; margin-bottom: 0.5em; }
    tt { font-size: 115%; }
    pre { background-color: #ffefbf; line-height: 1.2em; font-family: monospace; margin: 1em -0.2em; padding: 1.2em 1.8em 1.5em; }
    code { font-family: monospace }
    blockquote { background: #ddd; border-left: 0.9em solid #aaa; color: black; padding: 0.8em 1em 1em 2em; margin: 0.8em 0; }
     
    @media Aural {
      h1 { stress: 20; richness: 90; }
      h2 { stress: 20; richness: 90; }
      h3 { stress: 20; richness: 90; }
      .hide { speak: none; }
      p.copyright { volume: x-soft; speech-rate: x-fast; }
      dt { pause-before: 20%; }
      pre { speak-punctuation: code; }
    }
  </style>
</head>

<body>

<h1>Recept pro vyznačení veřejné zakázky v RDFa</h1>
<dl>
  <dt><strong>Autoři:</strong></dt>
  <dd>
    <ul>
      <li>Martin Nečaský (MFF UK)</li>
    </ul>
  </dd>
</dl>

<hr />

<p>Pro popis veřejných zakázek pomocí formátu RDFa používáme slovník, který jsme pro tyto účely vytvořili. Slovník kombinuje některé všeobecně uznávané slovníky, jako např. <a href="http://www.heppnetz.de/projects/goodrelations/">GoodRelations</a> nebo <a href="http://dublincore.org/documents/dces/">Dublin Core</a>.</p>

<h2>HTML vs. XHTML</h2>

<p>Prozatím je standardizováno pouze rozšíření jazyka XHTML o prvky jazyka RDFa. XHTML dokument potom vypadá takto:</p>

<pre>
<strong>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.1//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="cs" lang="cs" version="XHTML+RDFa 1.1"&gt;</strong>
   &hellip;
<strong>&lt;html&gt;</strong>
</pre>

<p>Pokud potřebujeme použít HTML, je to možné. RDFa rozšíření jazyka HTML ještě sice není standardizováno, ale fungovat bude. HTML dokument vypadá takto:</p>

<pre>
<strong>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01+RDFa 1.1//EN"
   "http://www.w3.org/MarkUp/DTD/html401-rdfa11-1.dtd"&gt;
&lt;html&gt;</strong>
   &hellip;
<strong>&lt;/html&gt;</strong>
</pre>

<h2>Jmenné prostory</h2>

<p>Nejprve je vždy nutné zavést potřebné jmenné prostory. To můžeme udělat v jakémkoliv elementu HTML stránky, který obsahuje RDFa kód. Jmenné prostory jsou pak platné v celém obsahu tohoto elementu.</p>

<p>Pro kompatibilitu s novější verzí RDFa 1.1 a XHTML+RDFa 1.1 je potřeba zavádět jmenné prostory pomocí atributu <code>prefix</code></p>

<pre>
<strong>&lt;html xmlns="http://www.w3.org/1999/xhtml"
      prefix="rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns#
              rdfs: http://www.w3.org/2000/01/rdf-schema#
              gr: http://purl.org/goodrelations/v1#
              dc: http://purl.org/dc/terms/
              c: http://example.org/contracts#
              payment: http://reference.data.gov.uk/def/payment#
              xsd: http://www.w3.org/2001/XMLSchema#"&gt;</strong>
   &hellip;
<strong>&lt;/html&gt;</strong>
</pre>

<p>Pro kompatibilitu se starší verzí RDFa 1.0 a XHTML+RDFa 1.0 je potřeba zavádět jmenné prostory pomocí XML jmenných prostorů</p>

<pre>
<strong>&lt;html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
      xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
      xmlns:gr="http://purl.org/goodrelations/v1#"
      xmlns:dc="http://purl.org/dc/terms/"
      xmlns:c="http://example.org/contracts#"
      xmlns:payment="http://reference.data.gov.uk/def/payment#"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema#"&gt;</strong>
   &hellip;
<strong>&lt;/html&gt;</strong>
</pre>

<p>Pro kompatibilitu s oběma verzemi je možné oba způsoby zavedení jmenných prostorů použít najednou.</p>

<h2>Určení místa na webové stránce, kde je veřejná zakázka popsána</h2>

<p>Informace o veřejné zakázce uzavřete do jednoho elementu, např. <tt>div</tt>. Potom určete, že obsah tohoto elementu se týká veřejné zakázky pomocí RDFa atributu <tt>typeof</tt> s hodnotou <tt>c:Contract</tt>. Jinými slovy tím říkáte, že obsah reprezentuje instanci třídy <tt>c:Contract</tt>.</p>

<pre>
<strong>&lt;div typeof="c:Contract"&gt;</strong>
  &hellip;
<strong>&lt;/div&gt;</strong>
</pre>

<p>Výše uvedeným dále říkáte, že samotná veřejná zakázka je anonymní, tj. nemá žádný identifikátor. To je v pořádku do té doby, kdy se chcete na zakázku odkazovat. Pokud chcete zakázce identifikátor přiřadit (např. proto, abyste se na ní mohli odkazovat), je potřeba jí přiřadit jednoznačné URI (v RDF se jako identifikátory používají právě URI). Toto URI může být např. fyzickým URL, na kterém je umístěna webová stránka s veřejnou zakázkou. Je důležité ale zajistit, že zvolené identifikační URI se pro danou veřejnou zakázku již nikdy nezmění. Pokud toto nemůžete u fyzického URL zajistit, je vhodnější zvolit nějaké virtuální URI (např. URL vašeho webu doplněné o <tt>/VZ/&lt;cislo-jednaci&gt;</tt>), na kterém fyzicky žádný dokument existovat nemusí.</p>

<pre>
<strong>&lt;div about="http://www.mesto.cz/VZ/12345678" typeof="c:Contract"&gt;</strong>
  &hellip;
<strong>&lt;/div&gt;</strong>
</pre>

<h2>Údaje při zveřejnění veřejné zakázky</h2>

<p>Pro každou veřejnou zakázku uvádějte její název. Pro názvy je v našem slovníku určena RDF vlastnost <tt>dc:title</tt>.</p>

<pre>
&lt;div about="http://www.mesto.cz/VZ/12345678" typeof="c:Contract"&gt;
   Název: <strong>&lt;span property="dc:title"&gt;Jezdecké potřeby městské policie&lt;/span&gt;</strong>
&lt;/div&gt;
</pre>

<p>Dále uvádějte datum zveřejnění a datum pro posílání nabídek. Pro ně jsou v našem slovníku určeny RDF vlastnosti <tt>dc:issued</tt> a <tt>c:bidDeadline</tt>. Je zde ale jeden podstatný rozdíl oproti názvu. Na webové stránce chcete návštěvníkům zobrazit datum ve formátu běžném v ČR, např. <tt>1. 2. 2010</tt> nebo <tt>1. února 2010</tt>. To ale není strojově čitelné datum. Pro strojově čitelnou podobu dat používáme datový typ <tt>xsd:date</tt> jazyka XML Schema, např. <tt>2010-02-01</tt>. Strojově čitelnou hodnotu ale pravděpodobně nechcete ukazovat svým návštěvníkům. Proto ji dávejte jako hodnotu atributu <tt>content</tt>. Také přidejte informaci o datovém typu pomocí atributu <tt>datatype</tt>.</p>

<pre>
&lt;div about="http://www.mesto.cz/VZ/12345678" typeof="c:Contract"&gt;
   &hellip;
   Datum zveřejnění: <strong>&lt;span property="dc:issued" content="2010-01-01" datatype="xsd:date"&gt;1. 1. 2010&lt;/span&gt;</strong>
   Datum pro podávání nabídek: <strong>&lt;span property="c:bidDeadline" content="2010-02-01" datatype="xsd:date"&gt;1. 2. 2010&lt;/span&gt;</strong>
&lt;/div&gt;
</pre>

<p>Dalším údajem je předmět veřejné zakázky ve formě CPV kódu. Seznam CPV kódů platných od roku 2008 je na adrese <code>http://opendata.cz/cpv/2008/</code>. Pro vyhledávání CPV kódů v rámci svého softwarového řešení můžete použít jednoduchý nástroj <tt>http://opendata.cz/cpv/</tt>. Předmětů může mít veřejná zakázka více. Zadávejte je pomocí RDF vlastnosti <tt>c:subject</tt>.</p>

<pre>
&lt;div about="http://www.mesto.cz/VZ/12345678" typeof="c:Contract"&gt;
   &hellip;
   Předmět: <strong>&lt;span rel="c:subject" resource="http://opendata.cz/cpv/2008/#cpv-18911000-8" datatype="xsd:string"&gt;sedla&lt;/span&gt;</strong>
   <strong>&lt;span rel="c:subject" resource="http://opendata.cz/cpv/2008/#cpv-18913000-2" datatype="xsd:string"&gt;biče&lt;/span&gt;</strong>
&lt;/div&gt;
</pre>

<h2>Údaje při zadání veřejné zakázky</h2>

<p>Po zadání veřejné zakázky můžete zveřejnit další údaje. První informací je počet obdržených nabídek, k čemuž použijte RDF vlastnost <tt>c:numberOfBids</tt>.</p>

<pre>
&lt;div about="http://www.mesto.cz/VZ/12345678" typeof="c:Contract"&gt;
   &hellip;
   Počet obdržených nabídek: <strong>&lt;span property="c:numberOfBids" datatype="xsd:int"&gt;2&lt;/span&gt;</strong>
&lt;/div&gt;
</pre>

<p>Slovník umožňuje také zveřejnit jednotlivé nabídky jako instance třídy <tt>c:Bid</tt>. Nabídku přiřadíte k veřejné zakázce pomocí vlastnosti <tt>c:bid</tt>. Jednotlivou nabídku tedy umístěte do samostatného elementu, např. <tt>div</tt>, s RDFa atributem <tt>typeof</tt> s hodnotou <tt>c:Bid</tt>. Tento element uzavřete do dalšího elementu, kterému přidejte RDFa atribut <tt>rel</tt> s hodnotou <tt>c:bid</tt>. Tím nabídku přiřadíte nadřazené zakázce. Nabídky uvažujeme jen anonymní (tj. neuvažujeme pro element s nabídkou RDFa atribut <tt>about</tt>). Nabídek může být několik.</p>

<pre>
&lt;div about="http://www.mesto.cz/VZ/12345678" typeof="c:Contract"&gt;
  &hellip;
  Nabídky:
  <strong>&lt;div rel="c:bid"&gt;
    &lt;div typeof="c:Bid"&gt;</strong>
      &hellip;
    <strong>&lt;/div&gt;
  &lt;/div&gt;</strong>
  <strong>&lt;div rel="c:bid"&gt;
    &lt;div typeof="c:Bid"&gt;</strong>
      &hellip;
    <strong>&lt;/div&gt;
  &lt;/div&gt;</strong>
&lt;/div&gt;
</pre>

<p>K nabídce přidejte nabízejícího pomocí vlastnosti <tt>c:bid</tt> (společnosti reprezentujte jako instance třídy <tt>gr:BusinessEntity</tt>) a nabídnutou cenu pomocí vlastnosti <tt>c:bidPrice</tt> (cenu reprezentujte jako instanci třídy <tt>gr:PriceSpecification</tt>). Obě instance jsou anonymní.</p>

<pre>
&lt;div about="http://www.mesto.cz/VZ/12345678" typeof="c:Contract"&gt;
  &hellip;
  Nabídky:
  &lt;div rel="c:bid"&gt;
    &lt;div typeof="c:Bid"&gt;
      <strong>&lt;p rel="c:bidder"&gt;
        &lt;span typeof="gr:BusinessEntity"&gt;Nabízející:</strong>
          &hellip;                 	
        <strong>&lt;/span&gt;
      &lt;/p&gt;</strong>
      <strong>&lt;p rel="c:bidPrice"&gt;
        &lt;span typeof="gr:PriceSpecification"&gt;Nabídnutá cena:</strong>
          &hellip;
        <strong>&lt;/span&gt;
      &lt;/p&gt;</strong>
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</pre>

<p>Nakonec doplňte data o nabízejícím a o nabídnuté ceně. K nabízejícímu uvažujeme jeho název (RDF vlastnost <tt>gr:legalName</tt> a IČO (<tt>c:orgNumber</tt>). K ceně uvažujeme hodnotu (<tt>gr:hasCurrencyValue</tt>), měnu (<tt>gr:hasCurrency</tt>) a zda je cena s DPH (<tt>gr:valueAddedTaxIncluded</tt>).</p>

<pre>
&lt;div about="http://www.mesto.cz/VZ/12345678" typeof="c:Contract"&gt;
  &hellip;
  Nabídky:
  &lt;div rel="c:bid"&gt;
    &lt;div typeof="c:Bid"&gt;
      &lt;p rel="c:bidder"&gt;
        &lt;span typeof="gr:BusinessEntity"&gt;Nabízející:
          <strong>&lt;span property="gr:legalName"&gt;První jezdecká a.s.&lt;/span&gt;
          , IČ
          &lt;span property="c:orgNumber"&gt;789654123&lt;/span&gt;</strong>                 	
        &lt;/span&gt;
      &lt;/p&gt;
      &lt;p rel="c:bidPrice"&gt;
        &lt;span typeof="gr:PriceSpecification"&gt;Nabídnutá cena:
          <strong>&lt;span property="gr:hasCurrencyValue" datatype="xsd:int"&gt;1.500.000&lt;/span&gt;
          &lt;span property="gr:hasCurrency" content="CZK"&gt;Kč&lt;/span&gt;</strong>
          &lt;span property="gr:valueAddedTaxIncluded" content="false" datatype="xsd:boolean"&gt;bez daně&lt;/span&gt;
        &lt;/span&gt;
      &lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</pre>

<p>Vítěze k veřejné zakázce přiřazujte pomocí RDF vlastnosti <tt>c:acceptedBid</tt> (místo <tt>c:bid</tt>).</p>

<pre>
&lt;div about="http://www.mesto.cz/VZ/12345678" typeof="c:Contract"&gt;
  &hellip;
  Vítězná nabídka:
  <strong>&lt;div rel="c:acceptedBid"&gt;
    &lt;div typeof="c:Bid"&gt;</strong>
      &hellip;
    <strong>&lt;/div&gt;
  &lt;/div&gt;</strong>
&lt;/div&gt;
</pre>

<p>Dále můžete uvést dokumenty, které se týkají veřejné zakázky (zadávací dokumentace, protokol z rozbalování obálek s nabídkami, smlouva).</p>

<pre>
&lt;div about="http://www.mesto.cz/VZ/12345678" typeof="c:Contract"&gt;
   &hellip;
   <strong>&lt;p&gt;&lt;a rel="c:document" href="http://www.mesto.cz/docs/12345678_popis.doc"&gt;Popis zakázky (DOC)&lt;/a>&lt;/p&gt;</strong>
   <strong>&lt;p&gt;&lt;a rel="c:document" href="http://www.mesto.cz/docs/12345678_smlouva.pdf"&gt;Smlouva (PDF)&lt;/a>&lt;/p&gt;</strong>
&lt;/div&gt;
</pre>

<p>Cenu za zakázku dohodnutou s vítězným dodavatelem na smlouvě můžete uvést cenu pomocí vlastnosti <tt>c:contractPrice</tt> (opět jako instanci třídy <tt>gr:PriceSpecification</tt>).</p>

<pre>
&lt;div about="http://www.mesto.cz/VZ/12345678" typeof="c:Contract"&gt;
  &hellip;
  <strong>&lt;div rel="c:contractPrice"&gt;</strong>
    &lt;span typeof="gr:PriceSpecification"&gt;Smluvní cena:
      <strong>&lt;span property="gr:hasCurrencyValue" datatype="xsd:int"&gt;1.000.000&lt;/span&gt;
      &lt;span property="gr:hasCurrency" content="CZK"&gt;Kč&lt;/span&gt;</strong>
    &lt;/span&gt;
  &lt;/div&gt;
&lt;/div&gt;
</pre>

<h2>Údaje při dokončení realizace veřejné zakázky</h2>

<p>Dodatkovou cenu (cena navíc vzniklá v průběhu realizace zakázky) a dotace (částka z celkové konečné ceny zakázky, která byla pokryta nějakou dotací) můžete uvést pomocí vlastnosti <tt>c:supplementPrice</tt>, resp. <tt>c:subsidy</tt> (opět jako instanci třídy <tt>gr:PriceSpecification</tt>).</p>

<pre>
&lt;div about="http://www.mesto.cz/VZ/12345678" typeof="c:Contract"&gt;
  &hellip;
  <strong>&lt;div rel="c:supplementPrice"&gt;
    &lt;span typeof="gr:PriceSpecification"&gt;Doplňková cena:
      <strong>&lt;span property="gr:hasCurrencyValue" datatype="xsd:int"&gt;150.000&lt;/span&gt;
      &lt;span property="gr:hasCurrency" content="CZK"&gt;Kč&lt;/span&gt;</strong>
    &lt;/span&gt;
  &lt;/div&gt;</strong>
  <strong>&lt;div rel="c:subsidy"&gt;
    &lt;span typeof="gr:PriceSpecification"&gt;Dotace:
      <strong>&lt;span property="gr:hasCurrencyValue" datatype="xsd:int"&gt;20.000&lt;/span&gt;
      &lt;span property="gr:hasCurrency" content="EUR"&gt;EUR&lt;/span&gt;</strong>
    &lt;/span&gt;
  &lt;/div&gt;</strong>
&lt;/div&gt;
</pre>

<p>Také můžete pomocí vlastností <tt>c:quality</tt> a <tt>c:onSchedule</tt> uvést, zda byla splněna očekávaná kvalita při realizaci veřejné zakázky a zda byly dodrženy termíny.</p>

<pre>
&lt;div about="http://www.mesto.cz/VZ/12345678" typeof="c:Contract"&gt;
  &hellip;
  Kvalita: <strong>&lt;span property="c:quality" content="true" datatype="xsd:boolean"&gt;ne&lt;/span&gt;</strong>
  Termíny: <strong>&lt;span property="c:onSchedule" content="false" datatype="xsd:boolean"&gt;ano&lt;/span&gt;</strong>
&lt;/div&gt;
</pre>

</body>
</html>